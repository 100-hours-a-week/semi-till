# TIL Template

## 날짜: 2024-11-13

### 스크럼

- 학습 목표 1 : 성실히 학습🏃‍♀️🏃‍♂️🏃

### 새로 배운 내용

### 1️⃣주제 1: DOM vs Virtual DOM

# DOM

**Document  (문서 → HTML를)**

**Objtect  (객체로)**

**Model**

1. **HTML 문서 구조를 객체로 표현한 것**
    
    ※ 문서구조 : HTML는 여러 태그 (html,div)로 문서 구조를 이루고 있다.
    
2. HTML이나 XML문서를 실체로 나타내는 API
3. HTML 문서를 브라우저가 이해할 수 있는 구조로 바꿔주는 역할이다. 
(※ 브라우저 : DOM을 기반으로 웹 페이지를 랜더링)

### → 문서 구조의 ‘**계층**’을 객체로 표현한다.

  따라서 DOM은 **트리 자료 구조**로 구축된다.

## DOM의 동작방식

1. 웹 브라우저가 HTML 파일을 가져오면 → HTML을 한줄 씩 읽으면서 DOM TREE를 만든다.
2. 각 HTML 요소는 (html,div)는 ‘Node’로 변환하여 ‘ 트리 구조로 추가된다.
    
    (※ 이때 최상위 구조는 <html>이 루트노트가 된다.)
    
3. 웹 페이지가 로드 된 후, **JS를 통해 DOM 트리에 접근 or 수정** 할 수 있다. 
    
    ```jsx
    **// ex)내용 변경**
    
    let element = document.querySelector('#myElement');
    element.textContent = '새로운 텍스트';  // 텍스트 내용 변경
    ```
    
    → HTML 파일을 수정하지 않아도 웹 페이지의 내용을 동적으로 수정할 수 있다. 
    
    (※ 동적으로 수정한다 == 새로고침을 하지 않아도 내용이나 스타일을 실시간으로 바꿀 수 있다.)
    
    → **Single Page Application**
    
    웹페이지에 정보가 추가되면 페이지를 새로 로딩해야했다,
    
    → JS로 필요한 곳만 바꿀 수 있도록 바꿔준다.

### ⇒ **DOM은 HTML과 JS간 상호작용을 하게 해주는 중간 역할이다.**

HTML의 구조를 JavaScript가 수정할 수 있도록 변환해준다.

## DOM 수정 방식

1. DOM을 수정할 경우  Reflow, Repaint과정을 거쳐야 한다.

2. ※ reflow: DOM의 레이아웃이 변경 됐을 때 발생

3. ※repaint : 요소의 시각적 스타일이 변경 됐을 때 발생

⇒ **변경된 요소와 그 주변 요소들을 다시 계산해야 한다.**

**⇒ 무거운 DOM을 자주 변경하면  성능 저하가 일어날 수 있다. `**

# Virtual DOM

*UI의 가상적인 표현을 메모리에 저장하고 Reacut DOM과 같은 라이브러리에 의해 실제 DOM과 동기화 된다.*

- DOM의 구조만 간결하게 ‘흉내 낸’ 복사본
- 복사본은 실제 DOM이 아닌 JS 객체 형태로 메모리에 저장된다.
- 실제 DOM을 조작하지 않고, 메모리에 ‘Virtual DOM’을 생성하여 작업을 수행한다.

### 동작방식
1. 데이터가 변경되면, DOM이 아닌 Virtual DOM을 업데이트 한다.  (변경된 내용이 적용된 Virtual DOM 생성)
2. 이전 Virtual DOM 과 업데이트된 Virtual DOM을 비교하며 차이점을 찾는다. (=**diffing 알고리즘 사용**)
3. 차이점이 생긴 부분만 실제 DOM을 적용한다.


- EX) **if 5개의 항목이 변경**

- → DOM을 5번 수정한다 ❌
- → 5개의 수정 사항을 모아서 한 번에 DOM에 적용한다. ⭕

- ⇒ **불필요한 DOM 업데이트를 줄일 수 있다.**

## DOM & Virtual DOM 장단점

### DOM

---

장점

1. **호환성**
    
    표준화된 형태이기 때문에, 어느 브라우저를 사용해도(chrome, edge, whale) 동일한 웹 페이지를 동작 시킬 수 있다.
    
2. **추가 library, framework 필요x**
    
    JS 만으로도 충분히 구현할 수 있다. 
    
    DOM 성능 저하가 거의 없는 간단한 웹 애플리케이션을 만들 때는 직접 DOM을 수정하는 방식이 더 빠르고 간단하다.
    

단점

1. **성능 저하 / 로직 복잡성**
    
    대규모 애플리케이션에서 DOM 조작이 많아진다면 성능 저하를 일으킬 수 있고, 로직이 복잡해질 수 있다.
    
2. **메모리 사용량 증가**
    1. 문서를 읽으면 한꺼번에 문서를 읽는다. 따라 문서의 양이 많아지면 더 많은 메모리를 필요로 한다.

### Virtual DOM

---

장점

1. **성능 최적화**
    
    실제 DOM 조작을 최소화하여 작동할 수 있다.
    
2. **크로스 플랫폼 지원**
    
    Virtual DOM은 브라우저 DOM에 직접 의존하지 않아 다양한 환경에서 사용 가능하다.
    

단점

1. **메모리 사용**
    
    Virtual DOM은 메모리에 저장되어 수정 사항이 발생할 때마다 Virtual DOM을 생성되기 때문에 메모리 사용량이 증가할 수 있다.
    
    (※ 가상 DOM은 DOM 트리와 비교하여 크기가 작고, 필요한 부분만 업데이트 되므로 **실제 DOM에 비해 메모리 부담이 적다.)**
    
2. **추가 오버헤드 발생**
    
    실제 DOM과 Virtual DOM을 비교/업데이트 하는 추가적인 계산 과정이 필요하다. 수정이 빈번하게 발생하면 계속해서 계산 과정이 일어나게 되고, 성능에 영향을 줄 수 있다.
    
3. **(?)라이브러리 사용 필요 → 복잡성 증가**
    
    Vritual DOM을 직접 구현하는 것은 복잡하기 때문에, 성능 최적화가 중요하다면 React, Vue 같은 프레임워크/ 라이브러리를 사용하는 것이 좋다.



---

### 오늘의 회고
오늘 딥다이브를 통해서 DOM을 확실하게 배우는 느낌이였다. 앞으로 헷갈리는 개념은 누구를 설명한다는 자세로 공부해야겠다.

### 참고 자료 및 링크

